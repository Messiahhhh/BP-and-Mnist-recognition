
<!DOCTYPE html>
<html class="app-ui">

    <head>
        <!-- Meta -->
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

        <!-- Document title -->
        <title>BP-Neutral-Network</title>

        <meta name="description" content="AppUI - Admin Dashboard Template & UI Framework" />
        <meta name="author" content="rustheme" />
        <meta name="robots" content="noindex, nofollow" />

        <!-- Favicons -->
        <link rel="apple-touch-icon" href="../static/img/favicons/apple-touch-icon.png" />
        <link rel="icon" href="../static/img/favicons/favicon.ico" />

        <!-- Google fonts -->
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,900%7CRoboto+Slab:300,400%7CRoboto+Mono:400" />

        <!-- Page JS Plugins CSS -->
        <link rel="stylesheet" href="../static/js/plugins/slick/slick.min.css" />
        <link rel="stylesheet" href="../static/js/plugins/slick/slick-theme.min.css" />
        <!-- AppUI CSS stylesheets -->
        <link rel="stylesheet" id="css-font-awesome" href="../static/css/font-awesome.css" />
        <link rel="stylesheet" id="css-ionicons" href="../static/css/ionicons.css" />
        <link rel="stylesheet" id="css-bootstrap" href="../static/css/bootstrap.css" />
        <link rel="stylesheet" id="css-app" href="../static/css/app.css" />
        <link rel="stylesheet" id="css-app-custom" href="../static/css/app-custom.css" />
        <!-- End Stylesheets -->
    </head>

    <body class="app-ui layout-has-drawer layout-has-fixed-header">
        <div class="app-layout-canvas">
            <div class="app-layout-container">

                <!-- Drawer -->
                <aside class="app-layout-drawer">

                    <!-- Drawer scroll area -->
                    <div class="app-layout-drawer-scroll">
                        <!-- Drawer logo -->
                        <div id="logo" class="drawer-header">
                            <a href="/index/"><img class="img-responsive" src="../static/img/logo/logo-backend.png" title="BP-Neutral-Network" alt="BP-Neutral-Network" /></a>
                        </div>

                        <!-- Drawer navigation -->
                        <nav class="drawer-main">
                            <ul class="nav nav-drawer">

                                <li class="nav-item nav-drawer-header">Functions</li>
                                <li class="nav-item active">
                                    <a href="/sin_x/"><i class="ion-ios-speedometer-outline"></i>SinX</a>
                                </li>

                                <li class="nav-item">
                                    <a href="/X_2/"><i class="ion-ios-monitor-outline"></i> X^2</a>
                                </li>
                                  <li class="nav-item">
                                    <a href="/X1_X2/"><i class="ion-ios-monitor-outline"></i> X1+X2</a>
                                </li>

                        <!-- End drawer navigation -->
                    </div>
                    <!-- End drawer scroll area -->
                </aside>
                <!-- End drawer -->

                <!-- Header -->
                <!-- End header -->
                <main class="app-layout-content">

                    <!-- Page Content -->
                    <div class="container-fluid p-y-md">
                        <!-- Stats -->
                     <div class="container">
	<div class="row clearfix">
		<div class="col-md-12 column">
			<div class="page-header">
				<h1>
                    <input type="button" class="btn btn-primary" id="change1" value="参数设置">
				</h1>
			</div>
{#            <form method="GET" action="/StockTrading/" id="x" name="q">#}
		</div>
	</div>
</div>
                                <div class="modal" id="eidtModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="myModalLabel">参数设置</h4>

            </div>
            <div class="modal-body">

                <form id="fm" class="form-horizontal" >
                               <div class="form-group">
                        <label for="username" class="col-sm-2 control-label">输入层神经元数</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="InputArea" placeholder="XX">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="username" class="col-sm-2 control-label">隐层层数</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="HidelayerNum" placeholder="XX">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="age" class="col-sm-2 control-label">各隐层神经元数</label>
                        <div class="col-sm-10">
                         <input type="text" class="form-control" id="NumHidelayer" placeholder="X,X,X">
                            </div>
                    </div>
                    <div class="form-group">
                        <label for="age" class="col-sm-2 control-label">输出层神经元数</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="OutputArea" placeholder="XX">
                        </div>
                    </div>
                       <div class="form-group">
                        <label for="age" class="col-sm-2 control-label">学习率</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="lr" placeholder="X.XX">
                        </div>
                    </div>
                       <div class="form-group">
                        <label for="age" class="col-sm-2 control-label">迭代次数</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="TM" placeholder="XX">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <span id="errorMsg" style="color: red;"></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="btnEditSave">确定</button>
            </div>
        </div>
    </div>
</div>
                        <!-- .row -->
                        <!-- End stats -->

                        <div class="row">
                            <!-- Company overview Chart -->
                            <div class="col-lg-8">
                                <div class="card">
                                    <div class="card-header bg-blue bg-inverse">
                                        <h4>网络结构</h4>
                                    </div>
                                    <div class="card-block p-b-0 bg-blue bg-inverse">
                                        <!-- Chart.js Charts (initialized in js/pages/base_pages_dashboard.js), for more examples please check http://www.chartjs.org/docs/ -->
                                        <div style="height: 200px;"><canvas id="draS" width="700" height="300"></canvas></div>
                                    </div>
                                    <!-- .card-block -->
                                </div>
                                <!-- .card -->
                            </div>
                            <!-- .col-lg-8 -->
                            <!-- End Company overview Chart -->
                            <!-- Weekly transactions Widget -->
                            <div class="col-lg-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h4>参数显示</h4>
                                        </div>
                                    <div>
                                        <table class="table table-striped table-hover" id="tra">
                                        </table>
                                    </div>
                                        <!-- .card-actions -->
                                    <!-- .card-header -->
                                    <div class="card-block text-center">
                                        <span class="label bg-green m-r-xs">Statistics <i class="ion-connection-bars"></i></span> <small><a href="javascript:void(0)"></a></small>
                                    </div>
                                </div>
                            </div>
                            <!-- .col-lg-4 -->
                            <!-- End Weekly transactions Widget -->
                        </div>
                        <!-- .row -->
                        <!-- .row -->

                        <!-- .row -->
                    </div>
                    <!-- .container-fluid -->
                    <!-- End Page Content -->

                </main>

            </div>
            <!-- .app-layout-container -->
        </div>
        <!-- .app-layout-canvas -->

        <!-- Apps Modal -->
        <!-- Opens from the button in the header -->
        <div id="apps-modal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-sm modal-dialog modal-dialog-top">
                <div class="modal-content">
                    <!-- Apps card -->
                    <div class="card m-b-0">
                        <div class="card-header bg-app bg-inverse">
                            <h4>Apps</h4>
                            <ul class="card-actions">
                                <li>
                                    <button data-dismiss="modal" type="button"><i class="ion-close"></i></button>
                                </li>
                            </ul>
                        </div>
                        <div class="card-block">
                            <div class="row text-center">
                                <div class="col-xs-6">
                                    <a class="card card-block m-b-0 bg-app-secondary bg-inverse" href="inde.html">
                                        <i class="ion-speedometer fa-4x"></i>
                                        <p>Admin</p>
                                    </a>
                                </div>
                                <div class="col-xs-6">
                                    <a class="card card-block m-b-0 bg-app-tertiary bg-inverse" href="frontend_home.html">
                                        <i class="ion-laptop fa-4x"></i>
                                        <p>Frontend</p>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- .card-block -->
                    </div>
                    <!-- End Apps card -->
                </div>
            </div>
        </div>
        <!-- End Apps Modal -->

        <div class="app-ui-mask-modal"></div>

        <!-- AppUI Core JS: jQuery, Bootstrap, slimScroll, scrollLock and App.js -->
        <script src="../static/js/core/jquery.min.js"></script>
        <script src="../static/js/core/bootstrap.min.js"></script>
        <script src="../static/js/core/jquery.slimscroll.min.js"></script>
        <script src="../static/js/core/jquery.scrollLock.min.js"></script>
        <script src="../static/js/core/jquery.placeholder.min.js"></script>
        <script src="../static/js/app.js"></script>
        <script src="../static/js/app-custom.js"></script>

        <!-- Page Plugins -->
        <script src="../static/js/plugins/slick/slick.min.js"></script>
        <script src="../static/js/plugins/chartjs/Chart.min.js"></script>
        <script src="../static/js/plugins/flot/jquery.flot.min.js"></script>
        <script src="../static/js/plugins/flot/jquery.flot.pie.min.js"></script>
        <script src="../static/js/plugins/flot/jquery.flot.stack.min.js"></script>
        <script src="../static/js/plugins/flot/jquery.flot.resize.min.js"></script>

        <!-- Page JS Code -->
        <script src="../static/js/pages/index.js"></script>
        <script>    
             var postData={};
            $(function()
            {
                // Init page helpers (Slick Slider plugin)
                App.initHelpers('slick');
                Paraset();
                SavePara();
            });
            function Paraset()
            {
                $('#change1').on('click',function(){
                    $('#eidtModal').modal('show');
                });
            }
                        function SavePara()
            {
                $('#btnEditSave').on('click',function(){
                    $('#eidtModal').modal('hide');
                        postData["inputArea"]=$("#InputArea").val();
                        postData["HidelayerNum"]=$("#HidelayerNum").val();
                        postData["NumHidelayer"]=$("#NumHidelayer").val();
                        postData["OutputArea"]=$("#OutputArea").val();
                        postData["lr"]=$("#lr").val();
                        postData["TM"]=$("#TM").val();
                    $.ajax({
                    url: '/InitBP',
                    type: 'GET',
                    data: postData,
                    dataType: 'JSON',
                    success: function(arg) {

                        $('#eidtModal').modal('hide');
                        var elem=document.getElementById("draS");//获取控件
                        elem.style.position = "absolute";//设置绝对定位（或者相对定位）
                        elem.style.left = "50px";//设置left数值
                        elem.style.top = "0px";//设置top数值
                        if (elem.getContext) {
                            var context = elem.getContext("2d");
                            var IP=parseInt(postData["inputArea"]);
                            var HN=parseInt(postData["HidelayerNum"]);
                            var NH=postData["NumHidelayer"];
                            NH=NH.split(",");
                            var OA=parseInt(postData["OutputArea"]);
                            var posx=0;
                            var posy=0;
                            var node=new Array();
                            for(var i=0;i<HN+2;i++)
                            {
                                node[i]=new Array();
                            }
                            if(IP%2==0)
                            {
                                posx=30;
                                posy=125;
                                var XY=new Array();
                                for(var i=0;i<IP/2;i++)
                                {
                                    var XY=new Array();
                                    posy-=50;
                                    context.beginPath();
                                    context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                                    XY.push(posx);
                                    XY.push(posy);
                                    node[0].push(XY);
                                    context.stroke();
                                }
                                posy=125;
                                for(var i=0;i<IP/2;i++)
                                {
                                    var XY=new Array();
                                    posy+=50;
                                     context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                                    XY.push(posx);
                                    XY.push(posy);
                                    node[0].push(XY);
                                }
                            }
                            else{
                                posx=30;
                                posy=125;
                                IP-=1;
                                 context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                             var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[0].push(XY);
                                for(var i=0;i<IP/2;i++)
                                {
                                    posy-=50;
                                     context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                             var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[0].push(XY);
                                }
                                posy=125;
                                for(var i=0;i<IP/2;i++)
                                {
                                    posy+=50;
                                     context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                             var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[0].push(XY);

                                }

                            }
                            posx=110;
                            posy=125;
                            for(var i=0;i<HN;i++) {
                                var tmp=parseInt(NH[i]);
                                if (tmp % 2 == 0) {
                                    posy = 125;
                                    for (var j = 0; j < tmp / 2; j++) {
                                        posy -= 50;
                                        context.beginPath();
                                        context.arc(posx, posy, 20, 0, 2 * Math.PI, true);
                                        context.stroke();
                                        var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[i+1].push(XY);
                                    }
                                    posy = 125;
                                    for (var k = 0; k < tmp / 2; k++) {
                                        posy += 50;
                                        context.beginPath();
                                        context.arc(posx, posy, 20, 0, 2 * Math.PI, true);
                                        context.stroke();
                                        var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[i+1].push(XY);
                                    }
                                }
                                else {
                                    posy = 125;
                                    tmp-=1;
                                    context.beginPath();
                                    context.arc(posx, posy, 20, 0, 2 * Math.PI, true);
                                    var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[i+1].push(XY);
                                    context.stroke();
                                    for (var j = 0; j < tmp / 2; j++) {
                                        posy -= 50;
                                        context.beginPath();
                                        context.arc(posx, posy, 20, 0, 2 * Math.PI, true);
                                        context.stroke();
                                        var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[i+1].push(XY);
                                    }
                                    posy = 125;
                                    for (var k = 0; k < tmp / 2; k++) {
                                        posy += 50;
                                        context.beginPath();
                                        context.arc(posx, posy, 20, 0, 2 * Math.PI, true);
                                        context.stroke();
                                        var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[i+1].push(XY);
                                    }
                                }
                                posx+=100;
                            }
                            if(OA%2==0)
                            {
                                posy=125;
                                var XY=new Array();
                                for(var i=0;i<OA/2;i++)
                                {
                                    var XY=new Array();
                                    posy-=50;
                                    context.beginPath();
                                    context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                                    XY.push(posx);
                                    XY.push(posy);
                                    node[HN+1].push(XY);
                                    context.stroke();
                                }
                                posy=125;
                                for(var i=0;i<OA/2;i++)
                                {
                                    var XY=new Array();
                                    posy+=50;
                                     context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                                    XY.push(posx);
                                    XY.push(posy);
                                    node[HN+1].push(XY);
                                }
                            }
                            else{
                                posy=125;
                                OA-=1;
                                 context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                             var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[HN+1].push(XY);
                                for(var i=0;i<OA/2;i++)
                                {
                                    posy-=50;
                                     context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                             var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[HN+1].push(XY);

                                }
                                posy=125;
                                for(var i=0;i<OA/2;i++)
                                {
                                    posy+=50;
                                     context.beginPath();
                            context.arc(posx, posy, 20, 0, 2*Math.PI, true);
                             context.stroke();
                             var XY=new Array();
                                XY.push(posx);
                                XY.push(posy);
                                node[HN+1].push(XY);
                                }
                            }
                            for(var i=0;i<HN+1;i++)
                            {
                                for(var j=0;j<node[i].length;j++)
                                {
                                    for(var k=0;k<node[i+1].length;k++)
                                    {

                                        context.moveTo(node[i][j][0], node[i][j][1]);
                                        context.lineTo(node[i+1][k][0], node[i+1][k][1]);
                                        context.stroke();
                                    }
                                }
                            }
                    }
                    var tj=document.getElementById("tra");
                          tj.innerHTML+='<tr ><td>'+'输入层神经元数'+'</td><td>'+arg['IP']+'</td></tr>';
                          tj.innerHTML+='<tr ><td>'+'隐层层数'+'</td><td>'+arg['HN']+'</td></tr>';
                           tj.innerHTML+='<tr ><td>'+'输出层神经元数'+'</td><td>'+arg['OA']+'</td></tr>';
                            tj.innerHTML+='<tr><td>'+'学习率'+'</td><td>'+arg['lr']+'</td></tr>';
                     tj.innerHTML+='<tr ><td>'+'迭代次数'+'</td><td>'+arg['TM']+'</td></tr>';
                    }
                });
                });
            }
        </script>

    </body>

</html>